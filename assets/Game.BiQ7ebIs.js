import{j as e}from"./jsx-runtime.CRkqtJS5.js";import{R as l}from"./index.B52nOzfP.js";import{M as a,_ as m,G as x,a as c}from"./DefaultGame.hXntRScl.js";import{u as d,m as h,A as v}from"./SocialIcon.t2dz2qvD.js";import{B as j}from"./ButtonPromise.UqonaXA1.js";import"./Toast.Store.MijDvoQc.js";const w={send:e.jsx("svg",{height:30,viewBox:"0 -1 24 24",fill:"none",children:e.jsxs("g",{children:[" ",e.jsx("path",{d:"M7 12L9.89075 14.8907V14.8907C9.95114 14.951 10.049 14.9511 10.1094 14.8907V14.8907L17 8",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})," "]})}),backspace:e.jsx("svg",{height:26,viewBox:"0 -1 24 24",fill:"none",children:e.jsxs("g",{children:[e.jsx("path",{d:"M7.91987 5C7.33602 5 6.78132 5.25513 6.40136 5.69842L2.11564 10.6984C1.47366 11.4474 1.47366 12.5526 2.11564 13.3016L6.40136 18.3016C6.78132 18.7449 7.33602 19 7.91987 19L19 19C20.1046 19 21 18.1046 21 17L21 7C21 5.89543 20.1046 5 19 5L7.91987 5Z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.8"}),e.jsx("path",{d:"M15 10.0001L11 14.0001",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),e.jsx("path",{d:"M11 10.0001L15 14.0001",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})})};function p({id:t}){return w[`${t}`]}function L(){const t=d(c),[n,o]=l.useState(!1);return l.useEffect(()=>{o(!1),t.isWin!==void 0&&setTimeout(()=>{o(!0)},t.valid[0].length*250)},[t.isWin]),l.useEffect(()=>{t.currentRow>0&&t.currentRow<=t.valid.length&&setTimeout(()=>{for(let s=0;s<t.currentRow;s++)t.valid[s].forEach(i=>{const f=document.querySelector(`[data-letter="${i.letter.toUpperCase()}"]`);f?.getAttribute("data-valid")!=="true"&&f?.setAttribute("data-valid",i.state)})},t.valid[0].length*260)},[t.currentRow]),e.jsxs("section",{className:"f-col w-100 relative mt-3",children:[e.jsxs("div",{className:"keyboard-container f-col g-2",children:[e.jsx("div",{className:"f-row g-2",children:"QWERTYUIOP".split("").map((s,r)=>e.jsx(u,{content:s,onPointer:()=>a.typing(s)},r))}),e.jsxs("div",{className:"f-row g-2",children:["ASDFGHJKL".split("").map((s,r)=>e.jsx(u,{content:s,onPointer:()=>a.typing(s)},r)),e.jsx(u,{className:"icon",content:e.jsx(p,{id:"backspace"}),onPointer:()=>a.backspace()})]}),e.jsxs("div",{className:"f-row g-2",children:[`${m.get().lang==="es"?"Ã‘":""}ZXCVBNM`.split("").map((s,r)=>e.jsx(u,{content:s,onPointer:()=>a.typing(s)},r)),e.jsx(u,{className:"icon",content:e.jsx(p,{id:"send"}),onPointer:()=>a.enter()})]})]}),e.jsx("div",{className:`play-again absolute d-flex f-center h-100 w-100 ${n?"active":""}`,children:e.jsx(j,{className:"btn btn-primary br-6",text:"Play Again",onClick:async()=>{await new Promise(r=>setTimeout(r,150));const s=m.get();x.getWord(s.lang,s.length),a.restart()}})})]})}const u=({content:t,onPointer:n,className:o})=>e.jsx("span",{className:`key-box br-4 d-flex f-center pointer fw-500 fs-custom-14-5 ${o||""}`,onClick:n,"data-letter":t,children:t});h({user:"",token:"",firebaseAuth:{uid:"",isAuth:!1}});function g({props:t}){return console.log(t),e.jsx("div",{className:"game-popup p-2 br-8 f-col g-2",children:"Hola mundo dese un Dialog"})}function b({data:t,index:n,currentLetter:o,currentRow:s}){const r=d(c),i=l.useRef(null);return l.useEffect(()=>{t.state!==void 0?(i?.current?.removeAttribute("data-valid"),i?.current?.removeAttribute("data-win"),i.current?.classList.remove("active"),setTimeout(()=>{i?.current?.classList.add("validate"),setTimeout(()=>{i.current?.setAttribute("data-valid",`${t.state}`),r.isWin&&r.currentRow===s&&setTimeout(()=>{i.current?.setAttribute("data-win","true")},(r?.valid[0].length+1)*120)},200)},n*210)):(i.current?.classList.remove("active"),i.current?.removeAttribute("data-valid"),i.current?.removeAttribute("data-win"))},[t.state]),e.jsx("span",{className:`game-box d-flex br-4 f-center ${o===n?"target":""} ${t.letter?"active":""}`,"data-valid":t.state,style:{pointerEvents:r.isWin!==void 0?"none":"visible",cursor:r.currentRow===s?"pointer":"default"},onClick:()=>{r.isWin===void 0&&r.currentRow===s&&c.setKey("currentLetter",n)},ref:i,children:t.letter})}function C({path:t}){const n=d(c);let o=n.valid;const s=r=>{const i=/^[a-zA-Z]$/;n.isWin||n.isWin===!1||n.currentRow===n.valid.length-1||(i.test(r.key)?a.typing(r.key):r.key==="Backspace"?a.backspace():r.key==="Enter"?a.enter(t):r.key==="ArrowLeft"?c.setKey("currentLetter",c.get().currentLetter-1):r.key==="ArrowRight"&&c.setKey("currentLetter",c.get().currentLetter+1))};return l.useEffect(()=>(window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}),[]),l.useEffect(()=>{n.isWin!==void 0&&setTimeout(()=>{n.isWin===!0&&v.custom(e.jsx(g,{}),{state:!0,bgClose:!0}),n.isWin===!1&&v.custom(e.jsx(g,{}),{state:!0,bgClose:!0})},n.valid[0].length*250)},[n.isWin]),e.jsxs("div",{className:"game-board f-col g-2 f-center w-min mx-auto mt-3",style:{pointerEvents:n.isWin!==void 0?"none":"visible"},children:[o?.map((r,i)=>e.jsx(k,{data:r,currentLetter:n.currentLetter,currentRow:n.currentRow,index:i},i)),e.jsx(L,{})]})}const k=({data:t,currentLetter:n,currentRow:o,index:s})=>e.jsx("div",{className:"f-row g-2 f-center","data-row":s,children:t?.map((r,i)=>e.jsx(b,{data:r,index:i,currentLetter:o===s?n:null,currentRow:s},i))});export{C as default};
