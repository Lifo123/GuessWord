import{j as t}from"./jsx-runtime.CRkqtJS5.js";import{R as l}from"./index.B52nOzfP.js";import{M as a,_ as c,G as w,a as g}from"./DefaultGame.DDEBo2Qj.js";import{u as f}from"./index.DcIy302Z.js";import{B as h}from"./ButtonPromise.lZbXWg4O.js";import"./Loading.Store.sVdA6XqR.js";import{A as j}from"./SocialIcon.BguoIGj3.js";import{F as p}from"./ToastAssets.Clm6xbZs.js";import"./CircleLoading.DnCBQFdf.js";const b={send:t.jsx("svg",{height:30,viewBox:"0 -1 24 24",fill:"none",children:t.jsxs("g",{children:[" ",t.jsx("path",{d:"M7 12L9.89075 14.8907V14.8907C9.95114 14.951 10.049 14.9511 10.1094 14.8907V14.8907L17 8",strokeWidth:"1.6",strokeLinecap:"round",strokeLinejoin:"round"})," "]})}),backspace:t.jsx("svg",{height:26,viewBox:"0 -1 24 24",fill:"none",children:t.jsxs("g",{children:[t.jsx("path",{d:"M7.91987 5C7.33602 5 6.78132 5.25513 6.40136 5.69842L2.11564 10.6984C1.47366 11.4474 1.47366 12.5526 2.11564 13.3016L6.40136 18.3016C6.78132 18.7449 7.33602 19 7.91987 19L19 19C20.1046 19 21 18.1046 21 17L21 7C21 5.89543 20.1046 5 19 5L7.91987 5Z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.8"}),t.jsx("path",{d:"M15 10.0001L11 14.0001",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"}),t.jsx("path",{d:"M11 10.0001L15 14.0001",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})]})})};function v({id:n}){return b[`${n}`]}function k({path:n}){const r=f(c),[o,i]=l.useState(!1);return l.useEffect(()=>{i(!1),r.isWin!==void 0&&setTimeout(()=>{i(!0)},r.valid[0].length*330)},[r.isWin]),l.useEffect(()=>{r.currentRow>0&&r.currentRow<=r.valid.length&&setTimeout(()=>{for(let e=0;e<r.currentRow;e++)r.valid[e].forEach(d=>{const m=document.querySelector(`[data-letter="${d.letter.toUpperCase()}"]`);m?.getAttribute("data-valid")!=="true"&&m?.setAttribute("data-valid",d.state)})},r.valid[0].length*240)},[r.currentRow]),t.jsxs("section",{className:"f-col w-100 relative mt-3",children:[t.jsxs("div",{className:"keyboard-container f-col",children:[t.jsx("div",{className:"f-row f-center",children:"QWERTYUIOP".split("").map((e,s)=>t.jsx(u,{content:e,onPointer:()=>a.typing(e)},s))}),t.jsxs("div",{className:"f-row f-center",children:["ASDFGHJKL".split("").map((e,s)=>t.jsx(u,{content:e,onPointer:()=>a.typing(e)},s)),t.jsx("span",{className:"key-box-icon d-flex f-center icon w-100 br-4 pointer",onPointerDown:()=>a.backspace(),children:t.jsx(v,{id:"backspace"})})]}),t.jsxs("div",{className:"f-row f-center",children:["Ã‘ZXCVBNM".split("").map((e,s)=>t.jsx(u,{content:e,onPointer:()=>a.typing(e)},s)),t.jsx("span",{className:"key-box-icon d-flex f-center icon w-100 br-4 f-grow pointer",onPointerDown:()=>a.enter(n),children:t.jsx(v,{id:"send"})})]})]}),t.jsx("div",{className:`play-again absolute d-flex f-center h-100 w-100 ${o?"active":""}`,children:t.jsx(h,{className:"btn btn-primary br-6",text:"Play Again",onClick:async()=>{await new Promise(e=>setTimeout(e,150)),a.restart(n)}})})]})}const u=({content:n,onPointer:r,className:o})=>t.jsx("span",{className:`key-box br-4 d-flex f-center pointer fw-500 fs-2 ${o||""}`,onClick:r,"data-letter":n,children:n});function y({state:n}){return t.jsxs("div",{className:"game-popup p-2 br-8 f-col g-2",children:[t.jsx("h2",{children:n?"You win!":"You lose"}),t.jsx("p",{className:"fs-custom-13-5 fw-500",children:n?"Congratulations!":"Sorry, you lost"})]})}function L({data:n,index:r,currentLetter:o,currentRow:i}){const e=f(c),s=l.useRef(null);return l.useEffect(()=>{n.state!==void 0?(s?.current?.removeAttribute("data-valid"),s?.current?.removeAttribute("data-win"),s.current?.classList.remove("active"),setTimeout(()=>{s?.current?.classList.add("validate"),setTimeout(()=>{s.current?.setAttribute("data-valid",`${n.state}`),e.isWin&&e.currentRow===i&&setTimeout(()=>{s.current?.setAttribute("data-win","true")},(e?.valid[0].length+1)*120)},180)},r*150)):(s.current?.classList.remove("active"),s.current?.removeAttribute("data-valid"),s.current?.removeAttribute("data-win"))},[n.state]),t.jsx("span",{className:`game-box d-flex br-4 f-center ${o===r?"target":""} ${n.letter?"active":""}`,"data-valid":n.state,style:{pointerEvents:e.isWin!==void 0?"none":"visible",cursor:e.currentRow===i?"pointer":"default"},onClick:()=>{e.isWin===void 0&&e.currentRow===i&&c.setKey("currentLetter",r)},ref:s,children:n.letter})}const x=g.get();function B({path:n}){const r=f(c);let o=r.valid;const i=async e=>{const s=/^[a-zA-Z]$/;if(!(r.isWin||r.isWin===!1||r.currentRow===r.valid.length-1))if(s.test(e.key))a.typing(e.key);else if(e.key==="Backspace")a.backspace();else if(e.key==="Enter"){const d=await p.timeTracker(()=>a.enter(n));console.log(d)}else e.key==="ArrowLeft"?c.setKey("currentLetter",c.get().currentLetter-1):e.key==="ArrowRight"&&c.setKey("currentLetter",c.get().currentLetter+1)};return l.useEffect(()=>{if(r.isWin===void 0&&w.preloadData(x.lang,x.length),!p.isMobile())return window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}},[]),l.useEffect(()=>{r.isWin!==void 0&&j.custom(t.jsx(y,{state:r.isWin}),{bgClose:!0,animate:"custom",startAnim:{top:"1rem"},endAnim:{top:"-3.5rem"}})},[r.waiting]),t.jsxs("div",{className:"game-board f-col f-align-between mx-auto mt-3",style:{pointerEvents:r.isWin!==void 0?"none":"visible"},children:[o?.map((e,s)=>t.jsx(A,{data:e,currentLetter:r.currentLetter,currentRow:r.currentRow,index:s},s)),t.jsx(k,{path:n})]})}const A=({data:n,currentLetter:r,currentRow:o,index:i})=>t.jsx("div",{className:"f-row f-center","data-row":i,children:n?.map((e,s)=>t.jsx(L,{data:e,index:s,currentLetter:o===i?r:null,currentRow:i},s))});export{B as default};
